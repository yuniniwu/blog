(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{37:function(n,e,t){"use strict";t.r(e);var c,r,a,i,o,s,b,d=t(1),u=t(22),j=t.n(u),l=t(4),O=t(2),m=t(3),f=Object(m.a)(c||(c=Object(O.a)(["\n/*\n  CSS reset \n  http://meyerweb.com/eric/tools/css/reset/ \n  v2.0 | 20110126\n  License: none (public domain)\n*/\n  html,\n  body,\n  div,\n  span,\n  applet,\n  object,\n  iframe,\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6,\n  p,\n  blockquote,\n  pre,\n  a,\n  abbr,\n  acronym,\n  address,\n  big,\n  cite,\n  code,\n  del,\n  dfn,\n  em,\n  img,\n  ins,\n  kbd,\n  q,\n  s,\n  samp,\n  small,\n  strike,\n  strong,\n  sub,\n  sup,\n  tt,\n  var,\n  b,\n  u,\n  i,\n  center,\n  dl,\n  dt,\n  dd,\n  ol,\n  ul,\n  li,\n  fieldset,\n  form,\n  label,\n  legend,\n  table,\n  caption,\n  tbody,\n  tfoot,\n  thead,\n  tr,\n  th,\n  td,\n  article,\n  aside,\n  canvas,\n  details,\n  embed,\n  figure,\n  figcaption,\n  footer,\n  header,\n  hgroup,\n  menu,\n  nav,\n  output,\n  ruby,\n  section,\n  summary,\n  time,\n  mark,\n  audio,\n  video {\n    margin: 0;\n    padding: 0;\n    border: 0;\n    font-size: 100%;\n    font: inherit;\n    vertical-align: baseline;\n  }\n  /* HTML5 display-role reset for older browsers */\n  article,\n  aside,\n  details,\n  figcaption,\n  figure,\n  footer,\n  header,\n  hgroup,\n  menu,\n  nav,\n  section {\n    display: block;\n  }\n  body {\n    line-height: 1;\n  }\n  ol,\n  ul {\n    list-style: none;\n  }\n  blockquote,\n  q {\n    quotes: none;\n  }\n  blockquote:before,\n  blockquote:after,\n  q:before,\n  q:after {\n    content: '';\n    content: none;\n  }\n  table {\n    border-collapse: collapse;\n    border-spacing: 0;\n  }\n  \n  /* below is not part of css reset */\n  body {\n    background-color: #FFF;\n  }\n\n"]))),h=t(9),p=t(5),x="token",g=function(n){localStorage.setItem(x,n)},v=function(){return localStorage.getItem(x)},y="https://student-json-api.lidemy.me",w=function(n){return fetch("".concat(y,"/posts/").concat(n)).then((function(n){return n.json()}))},k=function(){var n=v();return fetch("".concat(y,"/me"),{headers:{authorization:"Bearer ".concat(n)}}).then((function(n){return n.json()}))},S=t(0),z=m.b.div(r||(r=Object(O.a)(["\n  text-align: center;\n  padding: 1rem 0;\n  font-size: 1.2rem;\n\n  p {\n    margin-top: 1rem;\n  }\n\n  button {\n    font-size: 1.2rem;\n    margin: 0 1rem;\n  }\n"]))),C=m.b.a(a||(a=Object(O.a)(["\n  padding: 0 1rem;\n  cursor: pointer;\n\n  ","\n"])),(function(n){return n.$active&&"\n      background: rgba(0,0,0,0.15)\n    "}));function F(n){var e=n.onClick,t=n.children;return Object(S.jsx)("button",{onClick:e,children:t})}function I(n){var e=n.pageArray,t=n.handlePageChanged,c=n.currentPage,r=n.handleCurrentPosts;return Object(S.jsxs)(z,{children:[Object(S.jsx)(F,{onClick:t,children:"\u4e0a\u4e00\u9801"}),e.map((function(n){return Object(S.jsx)(C,{$active:c===n,onClick:r,children:n},n)})),Object(S.jsx)(F,{onClick:t,children:"\u4e0b\u4e00\u9801"})]})}var q=m.b.div(i||(i=Object(O.a)(["\n  max-width: 960px;\n  margin: 0 auto;\n  padding: 30px;\n  font-size: 1rem;\n"]))),E=m.b.div(o||(o=Object(O.a)(["\n  padding: 16px;\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n  border-bottom: 1px solid #555;\n"]))),A=Object(m.b)(h.b)(s||(s=Object(O.a)(["\n  font-size: 1.5rem;\n  text-decoration: none;\n  color: black;\n"]))),P=m.b.div(b||(b=Object(O.a)(["\n  color: rgba(0, 0, 0, 0.5);\n"])));function D(n){var e=n.post;return Object(S.jsxs)(E,{children:[Object(S.jsx)(A,{to:"/posts/".concat(e.id),children:e.title}),Object(S.jsx)(P,{children:new Date(e.createdAt).toLocaleString()})]})}function $(){var n=Object(d.useState)(1),e=Object(l.a)(n,2),t=e[0],c=e[1],r=Object(d.useState)([]),a=Object(l.a)(r,2),i=a[0],o=a[1],s=Object(d.useRef)(null);Object(d.useEffect)((function(){(function(n,e){return fetch("".concat(y,"/posts?_sort=createdAt&_order=desc&_start=").concat(n,"&_limit=").concat(e)).then()})(5*(t-1),5).then((function(n){s.current=n.headers.get("x-total-count"),n.json().then((function(n){return o(n)}))}))}),[t]);for(var b=Math.ceil(s.current/5),u=[],j=1;j<=b;j++)u.push(j);var O=Object(d.useCallback)((function(n){var e=n.target.innerText;if("\u4e0a\u4e00\u9801"===e){if(t<=1)return;c((function(n){return n-1}))}if("\u4e0b\u4e00\u9801"===e){if(t>=b)return;c((function(n){return n+1}))}}),[t,b]),m=Object(d.useCallback)((function(n){var e=Number(n.target.innerText);c(e)}),[]);return Object(S.jsxs)(q,{children:[i.map((function(n){return Object(S.jsx)(D,{post:n},n.id)})),Object(S.jsx)(I,{pageArray:u,handlePageChanged:O,currentPage:t,handleCurrentPosts:m})]})}var N,T,J,L,B,_,U,H,M,R,V=Object(d.createContext)(null),G=m.b.div(N||(N=Object(O.a)(["\n  max-width: 960px;\n  margin: 0 auto;\n  padding: 30px;\n"]))),K=m.b.form(T||(T=Object(O.a)(["\n  font-size: 1.2rem;\n"]))),Q=m.b.input(J||(J=Object(O.a)(["\n  margin: 0 0 1rem 1rem;\n  padding: 0.5rem;\n  font-size: 1.2rem;\n"]))),W=m.b.input(L||(L=Object(O.a)(["\n  text-decoration: none;\n  font-size: 1.2rem;\n  padding: 0.5rem 1rem;\n  background: #555;\n  color: #fff;\n  cursor: pointer;\n  transition: all 0.3s;\n\n  &:hover {\n    transform: scale(1.2);\n  }\n\n  ","\n"])),(function(n){return!0===n.disabled&&"\n    background: #ccc;\n    color: #fff;\n    cursor: none;\n    transition: none;\n\n    &:hover {\n      transform: none;\n    }\n\n  "})),X=m.b.div(B||(B=Object(O.a)(["\n  margin-top: 1rem;\n  font-weight: bold;\n  color: red;\n"])));function Y(){var n=Object(d.useContext)(V).setUser,e=Object(d.useState)(""),t=Object(l.a)(e,2),c=t[0],r=t[1],a=Object(d.useState)(""),i=Object(l.a)(a,2),o=i[0],s=i[1],b=Object(d.useState)(""),u=Object(l.a)(b,2),j=u[0],O=u[1],m=Object(p.f)(),f=Object(d.useState)(!1),h=Object(l.a)(f,2),x=h[0],v=h[1],w=function(){O(""),v(!1)};return Object(S.jsx)(G,{children:Object(S.jsxs)(K,{onSubmit:function(e){e.preventDefault(),function(n,e){return fetch("".concat(y,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:n,password:e})}).then((function(n){return n.json()}))}(c,o).then((function(e){if(0===e.ok)return v(!0),O(e.message);g(e.token),k().then((function(e){if(1!==e.ok)return g(null),v(!0),O(e.message);n(e.data),m.push("/")}))})),r(""),s(""),v(!1)},children:[Object(S.jsxs)("div",{children:["\u5e33\u865f:",Object(S.jsx)(Q,{value:c,onChange:function(n){r(n.target.value)},onFocus:w})]}),Object(S.jsxs)("div",{children:["\u5bc6\u78bc",Object(S.jsx)(Q,{value:o,onChange:function(n){s(n.target.value)},onFocus:w,type:"password"})]}),Object(S.jsx)(W,{type:"submit",value:"\u767b\u5165",disabled:x}),j&&Object(S.jsx)(X,{children:j})]})})}var Z,nn,en,tn,cn,rn,an,on,sn=m.b.div(_||(_=Object(O.a)(["\n  max-width: 960px;\n  margin: 0 auto;\n  padding: 30px;\n"]))),bn=m.b.form(U||(U=Object(O.a)(["\n  font-size: 1.2rem;\n"]))),dn=m.b.input(H||(H=Object(O.a)(["\n  margin: 0 0 1rem 1rem;\n  padding: 0.5rem;\n  font-size: 1.2rem;\n"]))),un=m.b.input(M||(M=Object(O.a)(["\n  text-decoration: none;\n  font-size: 1.2rem;\n  padding: 0.5rem 1rem;\n  background: #555;\n  color: #fff;\n  cursor: pointer;\n  transition: all 0.3s;\n\n  &:hover {\n    transform: scale(1.2);\n  }\n\n  ","\n"])),(function(n){return!0===n.disabled&&"\n    background: #ccc;\n    color: #fff;\n    cursor: none;\n    transition: none;\n\n    &:hover {\n      transform: none;\n    }\n\n  "})),jn=m.b.div(R||(R=Object(O.a)(["\n  margin-top: 1rem;\n  font-weight: bold;\n  color: red;\n"])));function ln(){var n=Object(d.useContext)(V).setUser,e=Object(d.useState)(""),t=Object(l.a)(e,2),c=t[0],r=t[1],a=Object(d.useState)(""),i=Object(l.a)(a,2),o=i[0],s=i[1],b=Object(d.useState)(""),u=Object(l.a)(b,2),j=u[0],O=u[1],m=Object(d.useState)(""),f=Object(l.a)(m,2),h=f[0],x=f[1],v=Object(p.f)(),w=Object(d.useState)(!1),z=Object(l.a)(w,2),C=z[0],F=z[1],I=function(){x(""),F(!1)};return Object(S.jsx)(sn,{children:Object(S.jsxs)(bn,{onSubmit:function(e){e.preventDefault(),function(n,e,t){return fetch("".concat(y,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:t,username:n,password:e})}).then((function(n){return n.json()}))}(o,j,c).then((function(e){if(0===e.ok)return F(!0),x(e.message);g(e.token),k().then((function(e){if(1!==e.ok)return g(null),F(!0),x(e.message);n(e.data),v.push("/")}))})),r(""),s(""),O(""),F(!1)},children:[Object(S.jsxs)("div",{children:["\u66b1\u7a31\uff1a",Object(S.jsx)(dn,{value:c,onChange:function(n){r(n.target.value)},onFocus:I})]}),Object(S.jsxs)("div",{children:["\u5e33\u865f\uff1a",Object(S.jsx)(dn,{value:o,onChange:function(n){s(n.target.value)},onFocus:I})]}),Object(S.jsxs)("div",{children:["\u5bc6\u78bc\uff1a",Object(S.jsx)(dn,{value:j,onChange:function(n){O(n.target.value)},onFocus:I,type:"password"})]}),Object(S.jsx)(un,{type:"submit",value:"\u8a3b\u518a",disabled:C}),h&&Object(S.jsx)(jn,{children:h})]})})}var On,mn,fn,hn,pn,xn,gn=m.b.div(Z||(Z=Object(O.a)(["\n  max-width: 960px;\n  margin: 0 auto;\n  padding: 30px;\n  font-size: 1rem;\n"]))),vn=m.b.div(nn||(nn=Object(O.a)(["\n  padding: 16px;\n"]))),yn=m.b.h2(en||(en=Object(O.a)(["\n  font-size: 1.5rem;\n  clear: both;\n"]))),wn=m.b.div(tn||(tn=Object(O.a)(["\n  padding: 16px;\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n"]))),kn=m.b.p(cn||(cn=Object(O.a)([""]))),Sn=m.b.p(rn||(rn=Object(O.a)([""]))),zn=m.b.p(an||(an=Object(O.a)(["\n  white-space: pre-wrap;\n"]))),Cn=Object(m.b)(h.b)(on||(on=Object(O.a)(["\n  font-size: 1.2rem;\n  display: inline-block;\n  background: #555;\n  color: #fff;\n  border: 1px solid black;\n  text-decoration: none;\n  padding: 0.4rem 0.8rem;\n  margin-bottom: 1rem;\n  cursor: pointer;\n  transition: all 0.3s;\n  float: right;\n\n  &:hover {\n    transform: scale(1.2);\n  }\n"])));function Fn(n){var e=n.articleId,t=n.user,c=Object(d.useState)([]),r=Object(l.a)(c,2),a=r[0],i=r[1],o=Object(d.useState)(!1),s=Object(l.a)(o,2),b=s[0],u=s[1];return Object(d.useEffect)((function(){w(e).then((function(n){return i(n)}))}),[e]),Object(d.useEffect)((function(){t&&t.id===a.userId&&u(!0)}),[t,a.userId]),Object(S.jsxs)(vn,{children:[b&&Object(S.jsx)(Cn,{to:"/edit-page/".concat(e),children:"\u7de8\u8f2f\u6587\u7ae0"}),Object(S.jsx)(yn,{children:a.title}),Object(S.jsxs)(wn,{children:[Object(S.jsxs)(kn,{children:["\u4f5c\u8005\uff1a",a.userId]}),Object(S.jsx)(Sn,{children:new Date(a.createdAt).toLocaleString()})]}),Object(S.jsx)(zn,{children:a.body})]})}function In(){var n=Object(p.h)().articleId,e=Object(d.useContext)(V).user;return Object(S.jsx)(gn,{children:Object(S.jsx)(Fn,{articleId:n,user:e})})}var qn,En,An,Pn,Dn,$n,Nn=m.b.div(On||(On=Object(O.a)(["\n  max-width: 960px;\n  margin: 0 auto;\n  padding: 30px;\n  font-size: 1rem;\n"]))),Tn=m.b.h2(mn||(mn=Object(O.a)(["\n  font-size: 1.5rem;\n  padding-left: 2rem;\n  border-bottom: 2px solid #ccc;\n  margin-bottom: 1rem;\n"]))),Jn=m.b.p(fn||(fn=Object(O.a)(["\n  padding-left: 2rem;\n\n  span {\n    color: blue;\n    font-weight: bold;\n  }\n"]))),Ln=m.b.div(hn||(hn=Object(O.a)(["\n  padding: 16px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]))),Bn=m.b.p(pn||(pn=Object(O.a)(["\n  width: 50%;\n  font-size: 2rem;\n  font-weight: bold;\n  color: #555;\n"]))),_n=m.b.p(xn||(xn=Object(O.a)(["\n  width: 50%;\n  white-space: pre-wrap;\n"])));function Un(){var n=Object(d.useContext)(V).user;return Object(S.jsxs)(Nn,{children:[!n&&alert("\u8acb\u5148\u767b\u5165"),n&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(Tn,{children:"About"}),Object(S.jsxs)(Jn,{children:["Hi, I am ",Object(S.jsx)("span",{children:n.username})]}),Object(S.jsxs)(Ln,{children:[Object(S.jsx)(Bn,{children:"Either I will find a way, or I will make one."}),Object(S.jsx)(_n,{children:"Lorem ipsum dolor sit amet, cum mandamus euripidis ne. Enim iracundia efficiendi ad vel. Et democritum repudiandae definitiones eam. Duo autem dolore tritani id, vim error reprehendunt at. Nec case eloquentiam referrentur id. At cum ridens mentitum comprehensam, adhuc homero vim an, consul mentitum concludaturque eu mel. Reque movet no vim, id dicam oblique duo. Duo veniam oporteat ne, utinam ridens forensibus sit at. Est ea verterem delicatissimi, case aliquam vix ei. Ad scripta impedit oporteat vix. Vix elitr audiam singulis cu. Ius causae molestie deserunt ea, cum ex meis integre scripserit. Blandit dissentiet eam cu, ius id erat corpora, sea cu volumus imperdiet definitionem. Et vidit debitis mea, vix quod menandri adversarium ad."})]})]})]})}var Hn,Mn,Rn,Vn,Gn,Kn,Qn=m.b.div(qn||(qn=Object(O.a)(["\n  max-width: 960px;\n  margin: 0 auto;\n  padding: 30px;\n  font-size: 1.2rem;\n"]))),Wn=m.b.form(En||(En=Object(O.a)([""]))),Xn=m.b.input(An||(An=Object(O.a)(["\n  width: 70%;\n  margin: 0 0 1rem 1rem;\n  padding: 0.5rem;\n  font-size: 1.2rem;\n"]))),Yn=m.b.textarea(Pn||(Pn=Object(O.a)(["\n  width: 90%;\n  height: 300px;\n  margin-bottom: 1rem;\n  font-size: 1.2rem;\n"]))),Zn=m.b.input(Dn||(Dn=Object(O.a)(["\n  display: block;\n  text-decoration: none;\n  background: #6699cc;\n  color: white;\n  padding: 0.5rem 1rem;\n  cursor: pointer;\n  transition: all 0.3s;\n\n  &:hover {\n    transform: scale(1.2);\n  }\n\n  ","\n"])),(function(n){return!0===n.disabled&&"\n    background: #ccc;\n    color: #fff;\n    cursor: none;\n    transition: none;\n\n    &:hover {\n      transform: none;\n    }\n\n  "})),ne=m.b.div($n||($n=Object(O.a)(["\n  margin-top: 1rem;\n  font-weight: bold;\n  color: red;\n"])));function ee(){var n=Object(d.useContext)(V).user,e=Object(d.useState)(""),t=Object(l.a)(e,2),c=t[0],r=t[1],a=Object(d.useState)(""),i=Object(l.a)(a,2),o=i[0],s=i[1],b=Object(d.useState)(""),u=Object(l.a)(b,2),j=u[0],O=u[1],m=Object(p.f)(),f=Object(d.useState)(!1),h=Object(l.a)(f,2),x=h[0],g=h[1],w=function(){O(""),g(!1)};return Object(S.jsx)(Qn,{children:n&&Object(S.jsxs)(Wn,{onSubmit:function(n){n.preventDefault(),function(n,e){var t=v();return fetch("".concat(y,"/posts"),{method:"PUT",headers:{"content-type":"application/json",authorization:"Bearer ".concat(t)},body:JSON.stringify({title:n,body:e})}).then((function(n){return n.json()}))}(c,o).then((function(n){if(0===n.ok)return g(!0),O(n.message);m.push("/"),alert("\u65b0\u589e\u6587\u7ae0\u6210\u529f")})),r(""),s(""),g(!1)},children:["\u6587\u7ae0\u6a19\u984c",Object(S.jsx)(Xn,{value:c,onChange:function(n){r(n.target.value)},onFocus:w}),Object(S.jsx)(Yn,{value:o,onChange:function(n){s(n.target.value)},onFocus:w}),Object(S.jsx)(Zn,{type:"submit",value:"\u65b0\u589e\u6587\u7ae0",disabled:x}),j&&Object(S.jsx)(ne,{children:j})]})})}var te,ce,re,ae,ie,oe=m.b.div(Hn||(Hn=Object(O.a)(["\n  max-width: 960px;\n  margin: 0 auto;\n  padding: 30px;\n  font-size: 1.2rem;\n"]))),se=m.b.form(Mn||(Mn=Object(O.a)([""]))),be=m.b.input(Rn||(Rn=Object(O.a)(["\n  width: 70%;\n  margin: 0 0 1rem 1rem;\n  padding: 0.5rem;\n  font-size: 1.2rem;\n"]))),de=m.b.textarea(Vn||(Vn=Object(O.a)(["\n  width: 90%;\n  height: 300px;\n  margin-bottom: 1rem;\n  font-size: 1.2rem;\n"]))),ue=m.b.input(Gn||(Gn=Object(O.a)(["\n  display: block;\n  text-decoration: none;\n  background: #6699cc;\n  color: white;\n  padding: 0.5rem 1rem;\n  cursor: pointer;\n  font-size: 1.2rem;\n  transition: all 0.3s;\n\n  &:hover {\n    transform: scale(1.2);\n  }\n\n  ","\n"])),(function(n){return!0===n.disabled&&"\n    background: #ccc;\n    color: #fff;\n    cursor: none;\n    transition: none;\n\n    &:hover {\n      transform: none;\n    }\n  "})),je=m.b.div(Kn||(Kn=Object(O.a)(["\n  margin-top: 1rem;\n  font-weight: bold;\n  color: red;\n"])));function le(){var n=Object(p.h)().articleId,e=Object(d.useContext)(V).user,t=Object(d.useState)([]),c=Object(l.a)(t,2),r=c[0],a=c[1],i=Object(d.useState)(""),o=Object(l.a)(i,2),s=o[0],b=o[1],u=Object(d.useState)(""),j=Object(l.a)(u,2),O=j[0],m=j[1],f=Object(d.useState)(""),h=Object(l.a)(f,2),x=h[0],g=h[1],k=Object(p.f)(),z=Object(d.useState)(!1),C=Object(l.a)(z,2),F=C[0],I=C[1];Object(d.useLayoutEffect)((function(){w(n).then((function(n){a(n)}))}),[n]),Object(d.useEffect)((function(){b(r.title),m(r.body)}),[r]);var q=function(){g(""),I(!1)};return Object(S.jsx)(oe,{children:e&&Object(S.jsxs)(se,{onSubmit:function(e){e.preventDefault(),function(n,e,t){var c=v();return fetch("".concat(y,"/posts/").concat(n),{method:"PATCH",headers:{"content-type":"application/json",authorization:"Bearer ".concat(c)},body:JSON.stringify({title:e,body:t,createdAt:(new Date).valueOf()})}).then((function(n){return n.json()}))}(n,s,O).then((function(e){if(0===e.ok)return I(!0),g(e.message);k.push("/posts/".concat(n)),alert("\u7de8\u8f2f\u6210\u529f")})),I(!1)},children:["\u6587\u7ae0\u6a19\u984c",Object(S.jsx)(be,{value:s,onChange:function(n){b(n.target.value)},onFocus:q}),Object(S.jsx)(de,{value:O,onChange:function(n){m(n.target.value)},onFocus:q}),Object(S.jsx)(ue,{type:"submit",value:"\u7de8\u8f2f\u5b8c\u6210",disabled:F}),x&&Object(S.jsx)(je,{children:x})]})})}var Oe=m.b.div(te||(te=Object(O.a)(["\n  height: 64px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n\n  box-shadow: 0px 4px 8px #555;\n  padding: 0 2rem;\n  font-size: 1.2rem;\n  box-sizing: border-box;\n  background: #fff;\n  color: #555;\n"]))),me=m.b.div(ce||(ce=Object(O.a)(["\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n"]))),fe=m.b.h1(re||(re=Object(O.a)(["\n  font-weight: bold;\n  font-size: 2rem;\n  margin-right: 1rem;\n"]))),he=m.b.nav(ae||(ae=Object(O.a)(["\n  display: flex;\n  align-items: center;\n  height: 64px;\n"]))),pe=Object(m.b)(h.b)(ie||(ie=Object(O.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100px;\n  height: 64px;\n  cursor: pointer;\n  color: black;\n  text-decoration: none;\n\n  ","\n"])),(function(n){return n.$active&&"\n    background: rgba(0,0,0,0.15)\n  "}));function xe(){var n=Object(p.g)(),e=Object(p.f)(),t=Object(d.useContext)(V),c=t.user,r=t.setUser;return Object(S.jsxs)(Oe,{children:[Object(S.jsxs)(me,{children:[Object(S.jsx)(fe,{children:"My Blog"}),Object(S.jsxs)(he,{children:[Object(S.jsx)(pe,{to:"/",$active:"/"===n.pathname,children:"\u9996\u9801"}),c&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(pe,{to:"/new-post",$active:"/new-post"===n.pathname,children:"\u767c\u5e03\u6587\u7ae0"}),Object(S.jsx)(pe,{to:"/about",$active:"/about"===n.pathname,children:"\u95dc\u65bc\u6211"})]}),Object(S.jsx)(pe,{to:"/message",$active:"/message"===n.pathname,children:"\u8a2a\u5ba2\u7559\u8a00\u677f"})]})]}),Object(S.jsxs)(he,{children:[!c&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(pe,{to:"/login",$active:"/login"===n.pathname,children:"\u767b\u5165"}),Object(S.jsx)(pe,{to:"/register",$active:"/register"===n.pathname,children:"\u8a3b\u518a"})]}),c&&Object(S.jsx)(pe,{onClick:function(){g(""),r(null),"/"!==n.pathname&&e.push("/")},children:"\u767b\u51fa"})]})]})}var ge,ve,ye,we,ke,Se,ze,Ce,Fe,Ie,qe,Ee,Ae,Pe,De=t(15),$e=t(20),Ne="https://student-json-api.lidemy.me/comments",Te=m.b.div(ge||(ge=Object(O.a)(["\n  max-width: 480px;\n  margin: 0 auto;\n  padding: 30px;\n  font-size: 1rem;\n"]))),Je=m.b.h1(ve||(ve=Object(O.a)(["\n  font-size: 2rem;\n  font-weight: bold;\n  text-align: center;\n"]))),Le=m.b.div(ye||(ye=Object(O.a)(["\n  margin: 10px;\n"]))),Be=m.b.input(we||(we=Object(O.a)(["\n  margin-bottom: 10px;\n"]))),_e=m.b.textarea(ke||(ke=Object(O.a)(["\n  display: block;\n  width: 100%;\n"]))),Ue=m.b.button(Se||(Se=Object(O.a)(["\n  margin-top: 8px;\n  font-size: 1rem;\n"]))),He=m.b.div(ze||(ze=Object(O.a)(["\n  margin: 10px;\n"]))),Me=m.b.div(Ce||(Ce=Object(O.a)(["\n  padding: 20px;\n\n  & + & {\n    border-top: 1px solid black;\n  }\n"]))),Re=m.b.div(Fe||(Fe=Object(O.a)(["\n  display: flex;\n  justify-content: space-between;\n  padding-bottom: 10px;\n  border-bottom: 1px solid gray;\n"]))),Ve=m.b.p(Ie||(Ie=Object(O.a)([""]))),Ge=m.b.p(qe||(qe=Object(O.a)([""]))),Ke=m.b.p(Ee||(Ee=Object(O.a)(["\n  margin-top: 10px;\n"]))),Qe=m.b.div(Ae||(Ae=Object(O.a)(["\n  color: red;\n"])));function We(n){var e=n.children,t=n.author,c=n.time;return Object(S.jsxs)(Me,{children:[Object(S.jsxs)(Re,{children:[Object(S.jsx)(Ve,{children:t}),Object(S.jsx)(Ge,{children:c})]}),Object(S.jsx)(Ke,{children:e})]})}var Xe,Ye=m.b.div(Pe||(Pe=Object(O.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  color: white;\n  font-size: 2rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"])));function Ze(){var n=Object(d.useState)(null),e=Object(l.a)(n,2),t=e[0],c=e[1],r=Object(d.useState)(null),a=Object(l.a)(r,2),i=a[0],o=a[1],s=Object(d.useState)({nickname:"",body:""}),b=Object(l.a)(s,2),u=b[0],j=b[1],O=Object(d.useState)(),m=Object(l.a)(O,2),h=m[0],p=m[1],x=Object(d.useState)(!1),g=Object(l.a)(x,2),v=g[0],y=g[1],w=u.nickname,k=u.body,z=function(){return fetch(Ne+"?_sort=createdAt&_order=desc").then((function(n){return n.json()})).then((function(n){c(n)})).catch((function(n){o(n.message)}))},C=function(n){var e=n.target.value,t=n.target.name;j(Object($e.a)(Object($e.a)({},u),{},Object(De.a)({},t,e)))},F=function(){p(null)};return Object(d.useEffect)((function(){z()}),[]),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(f,{}),Object(S.jsxs)(Te,{children:[v&&Object(S.jsx)(Ye,{children:"loading..."}),Object(S.jsx)(Je,{children:"\u7559\u8a00\u677f"}),Object(S.jsxs)(Le,{children:["\u66b1\u7a31\uff1a",Object(S.jsx)(Be,{name:"nickname",value:w,onChange:C,onFocus:F}),Object(S.jsx)(_e,{name:"body",value:k,onChange:C,onFocus:F,rows:10}),Object(S.jsx)(Ue,{onClick:function(n){n.preventDefault(),v||(y(!0),fetch(Ne,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(u)}).then((function(n){return n.json()})).then((function(n){y(!1),0!==n.ok?(j({nickname:"",body:""}),z()):p(n.message)})).catch((function(n){y(!1),p(n.message)})))},children:"\u9001\u51fa"}),h&&Object(S.jsx)(Qe,{children:h})]}),i&&Object(S.jsxs)(Qe,{children:["something went wrong. ",i.toString()]}),t&&0===t.length&&Object(S.jsx)(Qe,{children:"No message fetched"}),Object(S.jsx)(He,{children:t&&t.map((function(n){return Object(S.jsx)(We,{children:n.body,author:n.nickname,time:new Date(n.createdAt).toLocaleString()},n.id)}))})]})]})}var nt=m.b.div(Xe||(Xe=Object(O.a)(["\n  max-width: 960px;\n  margin: 0 auto;\n  padding-top: 64px;\n  font-size: 1rem;\n"])));function et(){var n=Object(d.useState)(null),e=Object(l.a)(n,2),t=e[0],c=e[1];return Object(d.useEffect)((function(){v()&&k().then((function(n){n.ok&&c(n.data)}))}),[]),Object(S.jsx)(V.Provider,{value:{user:t,setUser:c},children:Object(S.jsx)(h.a,{basename:"/blog",children:Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(f,{}),Object(S.jsxs)(nt,{children:[Object(S.jsx)(xe,{}),Object(S.jsxs)(p.c,{children:[Object(S.jsx)(p.a,{path:"/message",children:Object(S.jsx)(Ze,{})}),Object(S.jsx)(p.a,{path:"/about",children:Object(S.jsx)(Un,{})}),Object(S.jsx)(p.a,{path:"/login",children:Object(S.jsx)(Y,{})}),Object(S.jsx)(p.a,{path:"/register",children:Object(S.jsx)(ln,{})}),Object(S.jsx)(p.a,{path:"/posts/:articleId",children:Object(S.jsx)(In,{})}),Object(S.jsx)(p.a,{path:"/new-post",children:Object(S.jsx)(ee,{})}),Object(S.jsx)(p.a,{path:"/edit-page/:articleId",children:Object(S.jsx)(le,{})}),Object(S.jsx)(p.a,{exact:!0,path:"/",children:Object(S.jsx)($,{})})]})]})]})})})}j.a.render(Object(S.jsx)(et,{}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.411e6e81.chunk.js.map